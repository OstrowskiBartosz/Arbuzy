CREATE DATABASE mydb;

CREATE TABLE uzytkownicy(
    id_uzytkownika MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    imie VARCHAR(20) NOT NULL,
    nazwisko VARCHAR(30) NOT NULL,
    login VARCHAR(30) NOT NULL,
    haslo VARCHAR(60) NOT NULL,
    miasto_zamieszkania VARCHAR(50) NOT NULL,
    ulica_zamieszkania VARCHAR(50) NOT NULL,
    kod_pocztowy VARCHAR(6) NOT NULL,
    typ_uzytkownika TINYINT(1) NOT NULL,
    adres_email VARCHAR(70) NOT NULL,
    telefon VARCHAR(9) NOT NULL,
    info VARCHAR(500),
    numer_nip VARCHAR(10),
    nazwa_firmy VARCHAR(100)
   );

   CREATE TABLE produkty(
    id_produktu MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_kategorii MEDIUMINT NOT NULL,
    id_producenta MEDIUMINT NOT NULL,
    nazwa_produktu VARCHAR(150) NOT NULL,
    opis_produktu VARCHAR(5000) NOT NULL,
    FOREIGN KEY (id_kategorii) REFERENCES kategorie(id_kategorii),
    FOREIGN KEY (id_producenta) REFERENCES producenci(id_producenta)
  );

  CREATE TABLE atrybuty(
      id_atrybutu MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
      id_produktu MEDIUMINT NOT NULL,
      atrybut VARCHAR(80) NOT NULL,
      wartosc VARCHAR(80) NOT NULL,
      FOREIGN KEY (id_produktu) REFERENCES produkty(id_produktu)
  );

  CREATE TABLE ceny(
    id_ceny MEDIUMINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    id_produktu MEDIUMINT NOT NULL,
    cena_netto FLOAT(7,2) NOT NULL,
    cena_brutto FLOAT(7,2) NOT NULL,
    procentvat TINYINT NOT NULL,
    od DATETIME NOT NULL,
    do DATETIME NOT NULL,
    FOREIGN KEY (id_produktu) REFERENCES produkty(id_produktu)
  );

  CREATE TABLE kategorie(
    id_kategorii MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nazwa_kategorii VARCHAR(100) NOT NULL,
  );

  CREATE TABLE producenci(
    id_producenta MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nazwa_producenta VARCHAR(100) NOT NULL
  );