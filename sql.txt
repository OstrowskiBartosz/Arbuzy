CREATE DATABASE mydb;

CREATE TABLE uzytkownicy(
  id_uzytkownika MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
  imie VARCHAR(20) NOT NULL,
  nazwisko VARCHAR(30) NOT NULL,
  login VARCHAR(30) NOT NULL,
  haslo VARCHAR(60) NOT NULL,
  miasto_zamieszkania VARCHAR(50) NOT NULL,
  ulica_zamieszkania VARCHAR(50) NOT NULL,
  kod_pocztowy VARCHAR(6) NOT NULL,
  typ_uzytkownika TINYINT(1) NOT NULL,
  adres_email VARCHAR(70) NOT NULL,
  telefon VARCHAR(9) NOT NULL,
  info VARCHAR(500),
  numer_nip VARCHAR(10),
  nazwa_firmy VARCHAR(100)
);

CREATE TABLE kategorie(
  id_kategorii MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nazwa_kategorii VARCHAR(100) NOT NULL,
);

CREATE TABLE producenci(
  id_producenta MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nazwa_producenta VARCHAR(100) NOT NULL
);

CREATE TABLE produkty(
  id_produktu MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_kategorii MEDIUMINT NOT NULL,
  id_producenta MEDIUMINT NOT NULL,
  nazwa_produktu VARCHAR(150) NOT NULL,
  opis_produktu VARCHAR(5000) NOT NULL,
  FOREIGN KEY (id_kategorii) REFERENCES kategorie(id_kategorii),
  FOREIGN KEY (id_producenta) REFERENCES producenci(id_producenta)
);

CREATE TABLE atrybuty(
  id_atrybutu MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_produktu MEDIUMINT NOT NULL,
  atrybut VARCHAR(80) NOT NULL,
  wartosc VARCHAR(80) NOT NULL,
  typ VARCHAR(10) NOT NULL,
  FOREIGN KEY (id_produktu) REFERENCES produkty(id_produktu)
);

CREATE TABLE ceny(
  id_ceny MEDIUMINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  id_produktu MEDIUMINT NOT NULL,
  cena_netto FLOAT(7,2) NOT NULL,
  cena_brutto FLOAT(7,2) NOT NULL,
  procentvat TINYINT NOT NULL,
  od DATETIME NOT NULL,
  do DATETIME NOT NULL,
  FOREIGN KEY (id_produktu) REFERENCES produkty(id_produktu)
);

  CREATE TABLE produkty_w_koszykach(
    id_produktu_w_koszyku MEDIUMINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_uzytkownika MEDIUMINT NOT NULL,
    id_produktu MEDIUMINT NOT NULL, 
    ilosc TINYINT NOT NULL,
    FOREIGN KEY (id_uzytkownika) REFERENCES uzytkownicy(id_uzytkownika),
    FOREIGN KEY (id_produktu) REFERENCES produkty(id_produktu)
  );
 _________________________________________________________________________________________________________________
|                                     ŻEBY PRZYJMOWAŁO POLSKIE ZNAKI                                              |
|                                                                                                                 |
|                ALTER TABLE produkty CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;                      |  
|                ALTER TABLE atrybuty CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;                      |  
|           ALTER TABLE produkty_w_koszykach CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;               |  
|_________________________________________________________________________________________________________________|

insert into producenci values (1, 'Western Digital');
insert into producenci values (2, 'Toshiba');
insert into producenci values (3, 'Seagate');
insert into producenci values (4, 'Intel');
insert into producenci values (5, 'Transcend');
insert into producenci values (6, 'Samsung');
insert into producenci values (7, 'Kingston');
insert into producenci values (8, 'ADATA');
insert into producenci values (9, 'Asus');
insert into producenci values (10, 'Gigabyte');
insert into producenci values (11, 'MSI');
insert into producenci values (12, 'Palit');
insert into producenci values (13, 'Zotac');
insert into producenci values (14, 'LG');
insert into producenci values (15, 'Lite-On');
insert into producenci values (16, 'Thermaltake');
insert into producenci values (17, 'Cooler Master');
insert into producenci values (18, 'Corsair');
insert into producenci values (19, 'Chieftec');
insert into producenci values (20, 'SilentiumPC');
insert into producenci values (21, 'G.Skill');
insert into producenci values (22, 'HyperX');
insert into producenci values (23, 'Ballistix');
insert into producenci values (24, 'Patriot');
insert into producenci values (25, 'ASRock');
insert into producenci values (26, 'AMD');

insert into kategorie values (1, 'Dyski HDD');
insert into kategorie values (2, 'Dyski SSD');
insert into kategorie values (3, 'Karty graficzne');
insert into kategorie values (4, 'Napędy optyczne');
insert into kategorie values (5, 'Obudowy');
insert into kategorie values (6, 'Pamięci RAM');
insert into kategorie values (7, 'Płyty główne');
insert into kategorie values (8, 'Procesory');
insert into kategorie values (9, 'Zasilacze');

insert into produkty values (1, 3, 4, "Gigabyte GeForce GTX 1660 GAMING OC", "Chcąc sięgać po najnowsze produkcje gamingowe, warto dysponować układem graficznym tego pokroju. Karta NVIDIA GTX 1660 bazuje na nowoczesnej architekturze Turing, co zapewnia jej wyższą wydajność w grach, projektowaniu grafiki i podczas użytkowania i obróbki multimediów. Karta GTX 1660 to rozwiązanie dedykowane dla graczy, streamerów oraz dla osób zajmujących się obróbką multimediów. Jednostka korzysta z pamięci GDDR5, oferuje wysoki zakres taktowania oraz doskonałe parametry użytkowe. GTX 1660 to karta graficzna stworzona z myślą o najbardziej wymagających użytkownikach.")

insert into produkty values (1, 3, 4, "Gigabyte GeForce GTX 1080", "Chcąc sięgać po ");
insert into produkty values (2, 3, 4, "Gigabyte GeForce RTX 2080", "Super karta");
insert into produkty values (3, 3, 4, "Gigabyte GeForce RTX 2060TI", "Mega Kartra do wszystkiego ");
insert into produkty values (4, 2, 2, "Super laptop GeForce", "praktycznie do wszystkiego ");

insert into atrybuty values (1, 1, "pamieć RAM", "6 GB", 1);
insert into atrybuty values (2, 1, "typ chłodzenia", "Wentylator", 1);
insert into atrybuty values (3, 1, "Rodzaj chipsetu", "GeForce GTX 1660", 1);
insert into atrybuty values (4, 2, "pamieć RAM", "8 GB", 1);
insert into atrybuty values (5, 2, "typ chłodzenia", "Wodne", 1);
insert into atrybuty values (6, 2, "Rodzaj chipsetu", "GeForce GTX 2080", 1);
insert into atrybuty values (7, 3, "pamieć RAM", "12 GB", 1);
insert into atrybuty values (8, 3, "typ chłodzenia", "Wentylator", 1);
insert into atrybuty values (9, 3, "Rodzaj chipsetu", "GeForce RTX 2060", 1);
insert into atrybuty values (10, 4, "pamieć RAM", "12 GB", 1);
insert into atrybuty values (11, 4, "Karta Graficzna", "Gigabyte GeForce RTX 2080", 1);
insert into atrybuty values (12, 4, "Procesor ", "Intel i7 9900K", 1);
insert into atrybuty values (13, 1, "Zdjecie główne", "https://images.morele.net/i256/4141835_0_i256.jpg", 2);
insert into atrybuty values (14, 2, "Zdjecie główne", "https://images.morele.net/i256/6352928_0_i256.jpg", 2);
insert into atrybuty values (15, 3, "Zdjecie główne", "https://images.morele.net/i256/5938939_0_i256.jpg", 2);
insert into atrybuty values (16, 4, "Zdjecie główne", "https://images.morele.net/i256/6314046_0_i256.jpg", 2);

insert into ceny values (1, 1, 979, 1184.59, 21, STR_TO_DATE('02/12/2019 21:00','%d/%m/%Y %H:%i'), STR_TO_DATE('03/12/2019 21:00','%d/%m/%Y %H:%i'));
insert into ceny values (2, 2, 1079, 1284.59, 21, STR_TO_DATE('02/12/2019 21:00','%d/%m/%Y %H:%i'), STR_TO_DATE('03/12/2019 21:00','%d/%m/%Y %H:%i'));
insert into ceny values (3, 3, 1400, 1786.59, 21, STR_TO_DATE('02/12/2019 21:00','%d/%m/%Y %H:%i'), STR_TO_DATE('03/12/2019 21:00','%d/%m/%Y %H:%i'));
insert into ceny values (4, 4, 7453, 9876.59, 21, STR_TO_DATE('02/12/2019 21:00','%d/%m/%Y %H:%i'), STR_TO_DATE('03/12/2019 21:00','%d/%m/%Y %H:%i'));

// nowe inserty
INSERT INTO produkty VALUES(1, 1, 3, "Barracuda 1 TB 3.5" SATA III (ST1000DM010)", "Dysk BarraCuda jest liderem w branży, oferując największą pojemność pamięci masowej do komputerów stacjonarnych i przenośnych. Dzięki dyskom osiągającym pojemność do 10 TB, portfolio produktów BarraCuda to wspaniała opcja umożliwiająca modernizację w różnej cenie. Bezkompromisowy dysk BarraCuda Pro łączy wiodącą w branży pojemność z prędkością na poziomie 7200 obr./min, zapewniającą wysoką wydajność i błyskawiczne czasy ładowania podczas gier lub wykonywania zadań o dużym obciążeniu.|https://images.morele.net/d/14700294685988f2cb7a0671022410425c28de6b0bb123ed539e97.png|Wydobądź jak najwięcej mocy ze swojej pamięci masowej dzięki dyskom BarraCuda. Począwszy od komputerów pełnych zdjęć i wspomnień, aż po komputery do gier, które potrzebują więcej miejsca, dysk BarraCuda rośnie wraz z twoimi potrzebami.|https://images.morele.net/d/147002946877550da87185e4105d1d96782d0013109dda4e29dc36.png");
INSERT INTO atrybuty VALUES(1, 1, "Format dysku", "3.5"", 1);
INSERT INTO atrybuty VALUES(2, 1, "Pojemność dysku [GB]", "1000", 1);
INSERT INTO atrybuty VALUES(3, 1, "Prędkość obrotowa [obr./min.]", "7200", 0);
INSERT INTO atrybuty VALUES(4, 1, "Interfejs", "SATA III", 0);
INSERT INTO atrybuty VALUES(5, 1, "Zdjęcie", "https://images.morele.net/i1064/1042371_4_i1064.jpg", 2);
INSERT INTO atrybuty VALUES(6, 1, "Zdjęcie", "https://images.morele.net/i1064/1042371_0_i1064.jpg", 3);
INSERT INTO ceny VALUES (1, 1, 131.60, 161.87, 23, STR_TO_DATE('01/12/2019 00:00','%d/%m/%Y %H:%i'), STR_TO_DATE('20/08/2020 21:00','%d/%m/%Y %H:%i'));

INSERT INTO produkty VALUES(2, 1, 2, "P300 2 TB 3.5" SATA III (HDWD120UZSVA)", "3,5-calowy wewnętrzny dysk twardy Toshiba P300 to gwarancja wysokiej wydajności dla profesjonalistów. Dzięki technologii dwuetapowego ruchu głowicy można liczyć na płynne, szybkie reakcje urządzenia. Poza tym dane i multimedia są chronione przez technologię parkowania głowicy, zapobiegającą uszkodzeniom w czasie przenoszenia, a także czujnik wstrząsów. Dysk P300 jest dostępny w wersjach o pojemności do 3 TB.|https://images.morele.net/d/1441178224362392bd4874c73f62fa0eb12be9e0ebba1fa75fb93b.jpg|P300 to idealne rozwiązanie dla projektantów graficznych i kreatywnych profesjonalistów poszukujących wysokiej wydajności. Cechuje się pojemnością sięgającą 3 TB, szybkim odczytem i zapisem oraz bezpieczną konstrukcją.|https://images.morele.net/d/144117822457042533dc47806d7b58fa38e324657134f8975c00a3.jpg|Konstrukcja dysku P300 obejmuje wewnętrzny czujnik wstrząsów, co zapobiega utracie danych. Ponadto technologia parkowania głowicy sprawia, że podczas transportu dysku twardego lub komputera stacjonarnego głowica nie styka się z powierzchnią dysku, co zapobiega zadrapaniom i utracie danych.");
INSERT INTO atrybuty VALUES(7, 2, "Format dysku", "3.5"", 1);
INSERT INTO atrybuty VALUES(8, 2, "Pojemność dysku [GB]", "2000", 1);
INSERT INTO atrybuty VALUES(9, 2, "Prędkość obrotowa [obr./min.]", "7200", 0);
INSERT INTO atrybuty VALUES(10, 2, "Interfejs", "SATA III", 0);
INSERT INTO atrybuty VALUES(11, 2, "Pamięć podręczna", "64", 0);
INSERT INTO atrybuty VALUES(12, 2, "Zdjęcie", "https://images.morele.net/i1064/860922_0_i1064.jpeg", 2);
INSERT INTO ceny VALUES (2, 2, 209.75, 257.99, 23, STR_TO_DATE('01/12/2019 00:00','%d/%m/%Y %H:%i'), STR_TO_DATE('20/08/2020 21:00','%d/%m/%Y %H:%i'));
